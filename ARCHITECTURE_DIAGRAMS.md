# ğŸ¬ SYSTEM ARCHITECTURE & FLOW DIAGRAMS

## ğŸ—ï¸ COMPONENT ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Challenge Page                            â”‚
â”‚  (/app/challenge/page.tsx)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                         â”‚
        â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Challenge Cards      â”‚            â”‚ Updated Tracking     â”‚
â”‚ Click to view        â”‚            â”‚ Card with Delete     â”‚
â”‚ (Modified)           â”‚            â”‚ (Modified)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                    â”‚
        â”‚ User clicks card                   â”‚ User clicks delete
        â”‚                                    â”‚
        â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EnhancedChallengeDetailsModal (NEW)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Challenge Title              [Edit] [Delete]         â”‚  â”‚
â”‚  â”‚ Description...                                        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Status: Active | Streak: 5 | 12 days active         â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ [Progress: 45%]                                      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚
â”‚  â”‚ â”‚ 45% â”‚  5  â”‚  0  â”‚ 5000 â”‚                          â”‚  â”‚
â”‚  â”‚ â”‚ C%  â”‚ Str â”‚Miss â”‚ Pts  â”‚                          â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Challenge Details...                                 â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ [View Videos] [Edit] [Close]                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ User clicks "View Videos"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ChallengeVideoTracker (NEW)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Summary: [5 Videos] [45K Views] [2K] [350] [2500pts]â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Video List:                                          â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚ â”‚ [Thumb] Video Title                            â”‚  â”‚  â”‚
â”‚  â”‚ â”‚         âœ“ On Time | Jan 31 | +100 pts         â”‚  â”‚  â”‚
â”‚  â”‚ â”‚         ğŸ“ˆ 1,234 | â¤ 234 | ğŸ’¬ 45             â”‚  â”‚  â”‚
â”‚  â”‚ â”‚                              [View] [Delete]   â”‚  â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ [More videos...]                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€ User clicks [View Video] â”€â”€â”
        â”‚                                â”‚
        â”‚                                â–¼
        â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚ Video Details Modal      â”‚
        â”‚                   â”‚ (YouTube embed)          â”‚
        â”‚                   â”‚ Full analytics           â”‚
        â”‚                   â”‚ [Close] [Delete]         â”‚
        â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€ User clicks [Delete Video] â”€â”€â”
                                           â”‚
                                           â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Confirmation Dialog           â”‚
                        â”‚ Delete this video?            â”‚
                        â”‚ [Cancel] [Delete Video]       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                        DELETE /api/challenges/videos/{id}
```

---

## ğŸ”„ DELETE CHALLENGE FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks [Delete]            â”‚
â”‚ on Challenge Card/Modal         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirmation Dialog              â”‚
â”‚                                  â”‚
â”‚ "Delete challenge?"             â”‚
â”‚ "This will delete all data"     â”‚
â”‚                                  â”‚
â”‚ [Cancel] [Delete Challenge]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€ Cancel â†’ Modal closes
            â”‚
            â””â”€ Delete
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DELETE /api/challenges/{id}   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Backend Processing:               â”‚
        â”‚                                  â”‚
        â”‚ 1. Verify auth (user owns it)   â”‚
        â”‚ 2. Delete challenge record       â”‚
        â”‚ 3. Cascade delete:               â”‚
        â”‚    - challenge_uploads          â”‚
        â”‚    - challenge_notifications    â”‚
        â”‚    - challenge_achievements     â”‚
        â”‚ 4. Trigger updates stats        â”‚
        â”‚ 5. Return success               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Frontend Updates:                 â”‚
        â”‚                                  â”‚
        â”‚ 1. Remove from challenges list   â”‚
        â”‚ 2. Close modal                   â”‚
        â”‚ 3. Call loadUserStats()          â”‚
        â”‚ 4. Update active count (2â†’1)     â”‚
        â”‚ 5. Show toast: "Deleted!"        â”‚
        â”‚ 6. Refresh dashboard             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    âœ… Challenge & all data gone
    âœ… Stats updated
    âœ… User notified
```

---

## ğŸ“¹ DELETE VIDEO FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks [Delete]            â”‚
â”‚ on Video Card                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirmation Dialog              â”‚
â”‚                                  â”‚
â”‚ "Delete this video?"            â”‚
â”‚                                  â”‚
â”‚ [Cancel] [Delete Video]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€ Cancel â†’ Dialog closes
            â”‚
            â””â”€ Delete
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DELETE /api/challenges/videos/{id}â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Backend Processing:               â”‚
        â”‚                                  â”‚
        â”‚ 1. Verify auth                   â”‚
        â”‚ 2. Delete video record           â”‚
        â”‚ 3. Fetch remaining videos        â”‚
        â”‚ 4. Recalculate points            â”‚
        â”‚ 5. Update challenge record       â”‚
        â”‚ 6. Return new_total_points       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Frontend Updates:                 â”‚
        â”‚                                  â”‚
        â”‚ 1. Remove from video list        â”‚
        â”‚ 2. Update stats display          â”‚
        â”‚ 3. Show toast: "Deleted!"        â”‚
        â”‚ 4. Close detail modal (if open)  â”‚
        â”‚ 5. Refresh video count           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    âœ… Video deleted
    âœ… Points recalculated
    âœ… List updated
```

---

## ğŸ“Š DATA FLOW

```
User Action (Delete Challenge)
        â”‚
        â–¼
Frontend API Call
  DELETE /api/challenges/{id}
        â”‚
        â–¼
Backend Validation
  â”œâ”€ Is user authenticated? âœ…
  â”œâ”€ Does challenge exist? âœ…
  â””â”€ Does user own it? âœ…
        â”‚
        â–¼
Database Operations (Atomic)
  â”œâ”€ DELETE user_challenges WHERE id={id}
  â”‚   â”œâ”€ Cascades to challenge_uploads
  â”‚   â”œâ”€ Cascades to challenge_notifications
  â”‚   â””â”€ Cascades to challenge_achievements
  â”‚
  â”œâ”€ TRIGGER: update_user_challenge_stats
  â”‚   â””â”€ Recalculate for this user
  â”‚
  â””â”€ Commit transaction
        â”‚
        â–¼
Response to Frontend
  {
    "message": "Challenge deleted successfully",
    "activeChallengeCount": 2
  }
        â”‚
        â–¼
Frontend Updates
  â”œâ”€ Remove from state
  â”œâ”€ Update UI
  â”œâ”€ Refresh stats
  â””â”€ Show notification
        â”‚
        â–¼
User Sees Updated View
  â”œâ”€ Challenge gone from list
  â”œâ”€ Active count: 3 â†’ 2
  â”œâ”€ Stats refreshed
  â””â”€ Success message shown
```

---

## ğŸ¯ STATE MANAGEMENT FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Challenge Page State                    â”‚
â”‚                                         â”‚
â”‚ const [allChallenges, setAll...] = []  â”‚
â”‚ const [userStats, setStats...] = null  â”‚
â”‚ const [selectedChallenge, setSel...] = â”‚
â”‚ const [showDetails, setShow...] = falseâ”‚
â”‚ const [videos, setVideos...] = []      â”‚
â”‚ const [loading, setLoading...] = false â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚
            â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Challenge Cards  â”‚    â”‚ Details Modal       â”‚
    â”‚ (rendered from   â”‚    â”‚ (shows selected)    â”‚
    â”‚  allChallenges)  â”‚    â”‚                     â”‚
    â”‚                  â”‚    â”‚ [Delete]            â”‚
    â”‚ Click â†’ select   â”‚    â”‚    â”‚                â”‚
    â”‚   & open modal   â”‚    â”‚    â”œâ”€ Call API      â”‚
    â”‚                  â”‚    â”‚    â”œâ”€ Update state  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€ Show notification
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Video Tracker    â”‚
                            â”‚ (shows videos)   â”‚
                            â”‚                  â”‚
                            â”‚ [Delete Video]   â”‚
                            â”‚    â”‚             â”‚
                            â”‚    â”œâ”€ Call API   â”‚
                            â”‚    â”œâ”€ Update     â”‚
                            â”‚    â””â”€ Notify     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± RESPONSIVE DESIGN FLOW

```
Desktop (1024px+)
â”œâ”€ Challenge Cards Grid (2-3 columns)
â”œâ”€ Details Modal (Max 900px width, centered)
â”œâ”€ Video Grid (4 columns)
â””â”€ Full-featured stats display

Tablet (768px - 1023px)
â”œâ”€ Challenge Cards Grid (2 columns)
â”œâ”€ Details Modal (Full width with padding)
â”œâ”€ Video Grid (2-3 columns)
â””â”€ Optimized spacing

Mobile (< 768px)
â”œâ”€ Challenge Cards (1 column, full width)
â”œâ”€ Details Modal (Full screen, scrollable)
â”œâ”€ Video Grid (1-2 columns)
â””â”€ Touch-friendly buttons
```

---

## ğŸ” PERMISSION CHECK FLOW

```
User initiates DELETE
        â”‚
        â–¼
Is user authenticated?
    â”œâ”€ No â†’ Return 401 Unauthorized
    â”‚
    â””â”€ Yes â†’ Continue
            â”‚
            â–¼
    Does resource exist?
        â”œâ”€ No â†’ Return 404 Not Found
        â”‚
        â””â”€ Yes â†’ Continue
                â”‚
                â–¼
        Does user own it?
            â”œâ”€ No â†’ Return 403 Forbidden
            â”‚
            â””â”€ Yes â†’ Execute deletion
                    âœ… Allowed
```

---

## ğŸ¬ VIDEO DETAIL LIFECYCLE

```
User clicks [View] on video
        â”‚
        â–¼
Modal opens with details
        â”‚
        â”œâ”€ YouTube embed loads
        â”œâ”€ Stats display
        â”œâ”€ Meta info shows
        â””â”€ [Delete] button available
        â”‚
        â–¼
User options:
â”œâ”€ [View full video] â†’ YouTube opens in new tab
â”œâ”€ [Close] â†’ Modal closes
â””â”€ [Delete Video] â†’ Confirmation â†’ Deletes
```

---

## âœ¨ COMPLETE ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Frontend Layer                        â”‚
â”‚  Challenge Page                                             â”‚
â”‚  â”œâ”€ Enhanced Tracking Card (Delete button)                 â”‚
â”‚  â”œâ”€ Challenge Details Modal (Full view + Delete)           â”‚
â”‚  â””â”€ Video Tracker Component (Videos + Delete)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚         â”‚         â”‚
                  â–¼         â–¼         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚DELETE       â”‚ â”‚GET       â”‚ â”‚POST      â”‚
        â”‚challenges   â”‚ â”‚videos    â”‚ â”‚tracking  â”‚
        â”‚DELETE       â”‚ â”‚          â”‚ â”‚          â”‚
        â”‚videos       â”‚ â”‚          â”‚ â”‚          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       API Layer (Next.js)           â”‚
        â”‚  /api/challenges/[id]/route.ts      â”‚
        â”‚  /api/challenges/videos/[id]/...    â”‚
        â”‚  /api/challenges/[id]/videos/...    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Database Layer (Supabase)       â”‚
        â”‚  â”œâ”€ user_challenges                 â”‚
        â”‚  â”œâ”€ challenge_uploads               â”‚
        â”‚  â”œâ”€ challenge_notifications         â”‚
        â”‚  â”œâ”€ challenge_achievements          â”‚
        â”‚  â””â”€ user_challenge_stats            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This is the complete system architecture! ğŸ¬âœ¨

All components work together seamlessly with proper permission checks, error handling, and automatic stat updates.

**Ready to deploy!** ğŸš€
